package me.skitttyy.kami.impl.features.modules.movement;


import me.skitttyy.kami.api.feature.module.Module;
import me.skitttyy.kami.api.utils.NullUtils;
import me.skitttyy.kami.api.value.Value;
import me.skitttyy.kami.api.value.builder.ValueBuilder;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.util.Formatting;

import java.text.Format;

public class TpExploit extends Module {

    public TpExploit()
    {
        super("TpExploit", Category.Movement);
    }

    Value<Number> Packets = new ValueBuilder<Number>()
            .withDescriptor("Packets Per Tick")
            .withValue(10)
            .withRange(1, 50)
            .register(this);

    @Override
    public void onEnable()
    {
        super.onEnable();

        if (NullUtils.nullCheck())
        {
            setEnabled(false);
            return;
        }
        for (int i = 0; i < Packets.getValue().intValue(); i++)
        {
            double sin = -Math.sin(Math.toRadians(mc.player.getYaw()));
            double cos = Math.cos(Math.toRadians(mc.player.getYaw()));
            mc.player.networkHandler.sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(mc.player.getX(), mc.player.getY() - 0.1, mc.player.getZ(), false));


            mc.player.networkHandler.sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(mc.player.getX() + sin * 10, mc.player.getY(), mc.player.getZ() + cos * 10, true));

        }
        this.setEnabled(false);
    }

    @Override
    public String getDescription()
    {
        return "TpExploit: Oh wow! another " + Formatting.RED + "exploit " + Formatting.WHITE + "that pasters stole!";
    }

}
